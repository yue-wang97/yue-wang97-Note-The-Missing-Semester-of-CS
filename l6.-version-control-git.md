# L6. Version Control \(Git\)

## Git’s data model

![](.gitbook/assets/screen-shot-2021-02-26-at-14.35.57.png)

It’s a clean, simple model of history.

```text
// a file is a bunch of bytes
type blob = array<byte>

// a directory contains named files and directories
type tree = map<string, tree | blob>

// a commit has parents, metadata, and the top-level tree
type commit = struct {
    parent: array<commit>
    author: string
    message: string
    snapshot: tree
}
```



### Objects and content-addressing <a id="objects-and-content-addressing"></a>

![](.gitbook/assets/screen-shot-2021-02-26-at-14.39.42.png)

An “object” is a blob, tree, or commit:

```text
type object = blob | tree | commit
```

In Git data store, all objects are content-addressed by their [SHA-1 hash](https://en.wikipedia.org/wiki/SHA-1).

```text
objects = map<string, object>

def store(object):
    id = sha1(object)
    objects[id] = object

def load(id):
    return objects[id]
```

Blobs, trees, and commits are unified in this way: they are all objects. When they reference other objects, they don’t actually _contain_ them in their on-disk representation, but have a reference to them by their hash.

